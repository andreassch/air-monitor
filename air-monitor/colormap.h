#pragma once

#include <stdint.h>

struct rgb_t
{
   uint8_t red;
   uint8_t green;
   uint8_t blue;
};

/**
 * Colormap
 */
class Colormap
{
public:
   Colormap(const float min_val, const float max_val)
         : m_min_val(min_val)
         , m_max_val(max_val)
   {
   }

   void setMin(const float min_val)
   {
      m_min_val = min_val;
   }
   void setMax(const float max_val)
   {
      m_max_val = max_val;
   }
   rgb_t color(const float value) const;

protected:
   float m_min_val = 0.0;
   float m_max_val = 1.0;

   // Colormap definition.
#ifdef COLORMAP_RAINBOW
   // Source: https://personal.sron.nl/~pault/
   static constexpr uint8_t m_no_of_colors = 26;
   static constexpr uint8_t m_reds[m_no_of_colors] = {
      0x6F, 0x60, 0x55, 0x4E, 0x4D, 0x4E, 0x54, 0x59, 0x60, 0x69, 0x77, 0x8C, 0xA6,
      0xBE, 0xD1, 0xDD, 0xE4, 0xE7, 0xE6, 0xE4, 0xDF, 0xDA, 0xB8, 0x95, 0x72, 0x52};
   static constexpr uint8_t m_greens[m_no_of_colors] = {
      0x4C, 0x59, 0x68, 0x79, 0x8A, 0x96, 0x9E, 0xA5, 0xAB, 0xB1, 0xB7, 0xBC, 0xBE,
      0xBC, 0xB5, 0xAA, 0x9C, 0x8C, 0x79, 0x63, 0x48, 0x22, 0x22, 0x21, 0x1E, 0x1A};
   static constexpr uint8_t m_blues[m_no_of_colors] = {
      0x9B, 0xA9, 0xB8, 0xC5, 0xC6, 0xBC, 0xB3, 0xA9, 0x9E, 0x90, 0x7D, 0x68, 0x54,
      0x48, 0x41, 0x3C, 0x39, 0x35, 0x32, 0x2D, 0x28, 0x22, 0x1E, 0x1B, 0x17, 0x13};
#else
   static constexpr uint8_t m_no_of_colors = 3;
   static constexpr uint8_t m_reds[m_no_of_colors] = {0x00, 0xFF, 0xFF};
   static constexpr uint8_t m_greens[m_no_of_colors] = {0xFF, 0xFF, 0x00};
   static constexpr uint8_t m_blues[m_no_of_colors] = {0x00, 0x00, 0x00};
#endif
};
